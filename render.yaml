# Minimal render.yaml example to deploy a Web Service on Render
# Update names, region, and plans to match your account and needs.
services:
  - type: web
    name: zorpido-web
    env: python
    plan: free
    region: oregon
    branch: main
    buildCommand: pip install -r requirements.txt
    # Upgrade packaging tools first for best compatibility with newer Python versions
    buildCommand: pip install --upgrade pip setuptools wheel && pip install -r requirements.txt && python manage.py collectstatic --noinput
    startCommand: gunicorn zorpido_config.wsgi --log-file -
    # Run migrations on deploy; Render supports a releaseCommand which runs before the service starts
    releaseCommand: python manage.py migrate --noinput
    autoDeploy: true
    # Environment variables (SECRET_KEY, DEBUG, DATABASE_URL, etc.) should be configured
    # securely from the Render dashboard or via the Render UI. Do NOT store secrets in the repo.

# Optional: declarative Postgres service (you can also add Postgres from the Render dashboard)
databases:
  - name: zorpido-db
    plan: starter
    engine: postgres
